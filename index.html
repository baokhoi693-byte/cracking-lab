<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Cracking Alkane Game</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #e9f2f3;
  text-align: center;
}

#startScreen, #game {
  margin-top: 40px;
}

#lab {
  margin: 30px auto;
  padding: 20px;
  width: 80%;
  background: #ffffff;
  border: 2px solid #ccc;
}

.molecule {
  cursor: crosshair;
  display: inline-block;
}

.atom {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: inline-block;
  margin: 4px;
}

.C {
  background: black;
}

.bond {
  display: inline-block;
  width: 20px;
  height: 4px;
  background: gray;
  margin-bottom: 12px;
}

button {
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}

progress {
  width: 300px;
  height: 20px;
}
</style>
</head>

<body>

<!-- M√ÄN H√åNH CH·ªú -->
<div id="startScreen">
  <h1>CRACKING ALKANE LAB</h1>
  <p>M√¥ ph·ªèng ph·∫£n ·ª©ng Cracking Alkane b·∫±ng s√∫ng nƒÉng l∆∞·ª£ng</p>
  <button onclick="startGame()">ENTER LAB</button>
</div>

<!-- GAME -->
<div id="game" style="display:none;">
  <p>Click v√†o ph√¢n t·ª≠ ƒë·ªÉ b·∫Øn s√∫ng cracking</p>

  <p>NƒÉng l∆∞·ª£ng s√∫ng:</p>
  <progress id="energyBar" value="0" max="100"></progress>

  <h2 id="levelText"></h2>

  <div id="lab"></div>

  <p id="result"></p>

  <button id="restartBtn" onclick="restartGame()" style="display:none;">
    CH∆†I L·∫†I
  </button>
</div>

<script>
/* ====== START GAME ====== */
function startGame() {
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("game").style.display = "block";
}

/* ====== BI·∫æN GAME ====== */
let level = 1;
let carbons = 10;   // b·∫Øt ƒë·∫ßu t·ª´ C10 ƒë·ªÉ nhi·ªÅu level
let energy = 0;

/* ====== V·∫º PH√ÇN T·ª¨ ====== */
function drawMolecule(c) {
  let html = "<div class='molecule' onclick='shoot()'>";
  for (let i = 0; i < c; i++) {
    html += "<div class='atom C'></div>";
    if (i < c - 1) html += "<div class='bond'></div>";
  }
  html += "</div>";

  document.getElementById("lab").innerHTML = html;
  document.getElementById("levelText").innerText =
    "Level " + level + ": Alkane C" + c + "H" + (2*c + 2);
}

drawMolecule(carbons);

/* ====== N·∫†P NƒÇNG L∆Ø·ª¢NG ====== */
setInterval(() => {
  if (energy < 100) energy += 4;
  document.getElementById("energyBar").value = energy;
}, 400);

/* ====== B·∫ÆN CRACKING ====== */
function shoot() {
  if (energy < 50) {
    document.getElementById("result").innerText =
      "‚ùå NƒÉng l∆∞·ª£ng ch∆∞a ƒë·ªß, ph√¢n t·ª≠ kh√¥ng v·ª°!";
    return;
  }

  energy = 0;

  if (carbons <= 2) {
    document.getElementById("result").innerText =
      "üéâ Ho√†n th√†nh chu·ªói cracking!";
    document.getElementById("restartBtn").style.display = "inline-block";
    return;
  }

  let remain = carbons - 2;

  document.getElementById("result").innerText =
    "üí• Cracking t·∫°o ra: Alkene C2H4 + Alkane C" +
    remain + "H" + (2*remain + 2);

  carbons = remain;
  level++;
  drawMolecule(carbons);
}

/* ====== CH∆†I L·∫†I ====== */
function restartGame() {
  level = 1;
  carbons = 10;
  energy = 0;

  document.getElementById("result").innerText = "";
  document.getElementById("restartBtn").style.display = "none";
  drawMolecule(carbons);
}
</script>

</body>
</html>
